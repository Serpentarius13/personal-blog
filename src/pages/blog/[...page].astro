---
import Pagination from "@/components/astro/Pagination.astro";
import PostGrid from "@/components/astro/posts/PostGrid.astro";
import Layout from "@/layouts/base";
import { getPosts } from "@/lib/posts";
import type { PaginateFunction } from "astro";

export async function getStaticPaths({ paginate }: { paginate: PaginateFunction }) {
  const allPosts = await getPosts();
  return paginate(
    allPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf()),
    { pageSize: 6 },
  );
}

const { page: pageInfo } = Astro.props;
---

<Layout
  title="Void Flower | Blog posts"
  description="Blog posts page of Void Flower blog"
  mainClassname="flex flex-col gap-4"
  bodyClassname="h-[100svh] h-screen"
  wrapperClassname="!h-auto min-h-full"
>
  <PostGrid posts={pageInfo.data} />
  <Pagination page={pageInfo} baseUrl="/blog" />
</Layout>
